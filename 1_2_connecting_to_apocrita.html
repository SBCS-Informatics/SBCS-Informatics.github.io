<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Connecting to Apocrita | SBCS-Informatics</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="./1_3_launching_a_job_on_apocrita.html" />
    
    
    <link rel="prev" href="./1_1_what_is_apocrita.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-edit-link/plugin.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search-pro/search-pro.css">
        
    
    

        
    <div class="book" data-level="1.2" data-basepath="." data-revision="Thu Jan 07 2016 13:51:22 GMT+0000 (UTC)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="1_0_using_unix_and_apocrita.html">
            
                
                    <a href="./1_0_using_unix_and_apocrita.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Using Unix and Apocrita
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="1_1_what_is_apocrita.html">
            
                
                    <a href="./1_1_what_is_apocrita.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        What is Apocrita?
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="1_2_connecting_to_apocrita.html">
            
                
                    <a href="./1_2_connecting_to_apocrita.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Connecting to Apocrita
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="1_3_launching_a_job_on_apocrita.html">
            
                
                    <a href="./1_3_launching_a_job_on_apocrita.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Launching a Job on Apocrita
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="1_4_basic_unix_navigation.html">
            
                
                    <a href="./1_4_basic_unix_navigation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Basic UNIX Navigation
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="1_5_playing_with_files.html">
            
                
                    <a href="./1_5_playing_with_files.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Playing With Files
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="1_6_copying_and_downloading_files.html">
            
                
                    <a href="./1_6_copying_and_downloading_files.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Copying &amp; Downloading Files
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="1_7_dealing_with_compressed_files.html">
            
                
                    <a href="./1_7_dealing_with_compressed_files.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Dealing with Compressed Files
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="1_8_compiling_a_piece_of_software.html">
            
                
                    <a href="./1_8_compiling_a_piece_of_software.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Compiling a Piece of Software
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="1_9_r.html">
            
                
                    <a href="./1_9_r.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        R
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="1_10_galaxy.html">
            
                
                    <a href="./1_10_galaxy.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.10.</b>
                        
                        Galaxy
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="1_11_handy_shortcuts.html">
            
                
                    <a href="./1_11_handy_shortcuts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.11.</b>
                        
                        Handy Shortcuts
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="2_0_advanced.html">
            
                
                    <a href="./2_0_advanced.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Advanced
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="3_0_contact.html">
            
                
                    <a href="./3_0_contact.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Contact
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >SBCS-Informatics</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <a id="edit-link" href="https://github.com/sbcs-informatics/sbcs-informatics.github.io/edit/src/1_2_connecting_to_apocrita.md" class="btn fa fa-edit pull-left">&nbsp;&nbsp;Edit</a><h2 id="2-connecting-to-apocrita">2. Connecting to Apocrita</h2>
<h3 id="get-an-account-on-the-cluster">Get an account on the cluster</h3>
<p>To get an Apocrita account you need to make a <a href="https://www.hpc.qmul.ac.uk/twiki/bin/view/HPC/RequestAccount" target="_blank">request to ITS Research</a>. Once this has been set up you can continue to log in with the details provided</p>
<h3 id="logging-in-from-mac-or-other-unix-systems">Logging in from Mac (or other unix systems)</h3>
<p>OS X (and indeed all Linux distributions) have an application called Terminal. On your Mac you can find it in Applications -&gt; Utilities.</p>
<ol>
<li>Open Terminal</li>
<li>Enter the following<pre><code>ssh -X [youruserID]@frontend1.apocrita.hpc.qmul.ac.uk
</code></pre>e.g.<pre><code>ssh -X btw000@frontend1.apocrita.hpc.qmul.ac.uk
</code></pre></li>
<li>Enter your password when prompted (It will not appear as you type, this is by design, your keystrokes are being registered)</li>
</ol>
<p>To avoid having to type your password each time you log in You can also set up SSH keys that will be used when you log in from your computer instead of a password. There are instructions on how to set up SSH keys in the <a href="2_0_advanced.html">advanced section</a></p>
<h3 id="logging-in-from-windows">Logging in from Windows</h3>
<p>The simplest way of doing things on Windows is using a program called <a href="http://mobaxterm.mobatek.net/" target="_blank">MobaXterm</a>. </p>
<ol>
<li><a href="http://mobaxterm.mobatek.net/download.html" target="_blank">Download</a> the newest version of MobaXterm</li>
<li>Create a session</li>
<li>Enter the address to frontend1 which is <code>frontend1.apocrita.hpc.qmul.ac.uk</code></li>
<li>You can also enter username and password to save them here</li>
<li>Connect and enter your username and/or password when prompted</li>
</ol>
<p>If you would rather use PuTTY. </p>
<ol>
<li><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html" target="_blank">Download</a> PuTTY</li>
<li>In the host name window enter the server address <code>frontend1.apocrita.hpc.qmul.ac.uk</code></li>
<li>Enter the correct port number (22) and check on correct connection type (SSH)</li>
<li>Now go to the data tab under connection and in auto-login username box enter your username (e.g.btw000)</li>
<li>Go back to the session tab and in the saved sessions box enter a name for this log in (e.g. frontend1)</li>
<li>Save!</li>
<li>Double click the session name and enter your password where prompted</li>
</ol>
<h3 id="display">Display</h3>
<p>If you&apos;re planning on using any graphical interface, e.g. plotting in R, you need the X11 fowarding flag, <code>-X</code>. This instructs the terminal forward display items to your computer, that will allow you to see your plots or other graphical user interfaces. You might as well always have this option set - to simplify things. MobaXterm uses X11 forwarding by default. </p>
<pre><code>ssh -X btw000@frontend1.apocrita.hpc.qmul.ac.uk
</code></pre><h3 id="keep-your-terminal-as-you-log-out-or-lose-network-connection">Keep your terminal as you log out or lose network connection</h3>
<p>When you shut your laptop down the connections it has made with Apocrita (and the rest of the outside world) will be interrupted. This can happen randomly at other times as well and the implication is that anything you were running in your terminal on Apocrita will be shut down too, along with the connection. </p>
<h4 id="screen">Screen</h4>
<p>Usefully, the program <code>screen</code> allows you to keep a process running on a server without the need to be consistently connected to the network. It sets up a session that will stay active even if you quit your terminal, you can just connect to the session later and you will find yourself exactly where you left off. </p>
<ul>
<li>screen -ls                   # list all your sessions</li>
<li>screen -r <session_id>       # reconnect to a session</session_id></li>
<li>CTRL+A, CTRL+D               # pressing these two key bindnings will detach you from the current screen session</li>
<li>CTRL+D                       # CTRL+D without CTRL+A first will terminate the session instead </li>
<li>man screen                   # manual for screen - explaining every option</li>
</ul>
<h4 id="make-a-specific-command-uninterruptable">Make a specific command uninterruptable</h4>
<p>When a terminal is shut down, a so called hangup signal is sent to any process running in that terminal telling it to quit. There is a way you can make your process ignore that specific signal with <code>nohup</code>. It is very simple to use, you add <code>nohup</code> before your command as such:</p>
<pre><code>bwa mem -t 10 -p inputreference.fa inputfasta.fastq &gt; outputfile.sam &amp;               #if this is your command
nohup bwa mem -t 10 -p inputreference.fa inputfasta.fastq &gt; outputfile.sam &amp;         #do this instead
nohup nice bwa mem -t 10 -p inputreference.fa inputfasta.fastq &gt; outputfile.sam &amp;    #its a good idea to add a nice value as well
</code></pre><p>An ampersand, &amp;, at the end of a command will send it to the background, however this is not enough as it will still be sent the hangup signal when the terminal is closed.</p>
<p>The last example includes the <code>nice</code> command as well. <code>nice</code> tells the computer that your process should be run with a lower priority, a good idea if you are leaving your process unattended! This does not mean it will take any longer than normal as long as there is available CPUs on the machine.</p>
<p>Keep in mind that nohup will redirect the output if it is a set to a terminal - use <code>man nohup</code> for more information. <code>nohup</code> does not prevent other signals and will not make your process unkillable!</p>
<p><img src="img/qmul_logo.png" alt="QMUL logo"></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./1_1_what_is_apocrita.html" class="navigation navigation-prev " aria-label="Previous page: What is Apocrita?"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./1_3_launching_a_job_on_apocrita.html" class="navigation navigation-next " aria-label="Next page: Launching a Job on Apocrita"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search-pro/search-pro.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"edit-link":{"base":"https://github.com/sbcs-informatics/sbcs-informatics.github.io/edit/src","label":"Edit"},"ga":{"token":"UA-69175221-1","configuration":"auto"},"search-pro":{"cutWordLib":"nodejieba","defineWord":["小需求","基础建设"]}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-69175221-1', 'auto');ga('send', 'pageview');</script>
    </body>
    
</html>
